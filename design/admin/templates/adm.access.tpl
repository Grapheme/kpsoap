<script type="text/javascript" src="{$SERVER_URL_NAME}{#ui_tablesorter#}"></script><table id="roles" class="tablesorter">	<thead>		<tr>			<th class="id"><div>ID</div></th>			<th class="role"><div>Роль</div></th>			<th class="roledesc"><div>Описание</div></th>			<th><div>Права доступа</div></th>			<th class="oper" onclick="void(0)">&nbsp;</th>		</tr>	</thead>	<tbody>	{section name=roles loop=$page.roles}		<tr>			{strip}<td>				{if $page.roles[roles].id < 0}					{$page.roles[roles].id|regex_replace:"/[\-]+/":"&bull;&nbsp;"}				{else}					{$page.roles[roles].id}				{/if}			</td>{/strip}			<td>{$page.roles[roles].name}</td>			<td width="100px">				{if $page.roles[roles].description == ''}					<span class="empty">Отсутствует</span>				{else}					<span class="descript">{$page.roles[roles].description|strip_tags|truncate:30:""}</span>				{/if}			</td>			<td class="roledesc">				{strip}				{assign var="site_section" value="_"}				{section name=sitesection loop=$page.roles[roles].rights}					{if $smarty.section.sitesection.first}<div id="right_full_{$smarty.section.roles.iteration}" class="window_fulltext">						<div class="close" onclick="showWindow.close('right_full_{$smarty.section.roles.iteration}');"></div>						<ul class="right_list">					{/if}					{assign var="new_site_section" value=$page.roles[roles].rights[sitesection].description|regex_replace:"/\[(.+)\].*/":"\\1"}					{if ($site_section == $new_site_section)}					, 					{elseif ($site_section != $new_site_section)}						{if $site_section!="_"}						&nbsp;)</li>						{/if}						<li>{$new_site_section} (						{assign var="site_section" value=$new_site_section}					{/if}					{$page.roles[roles].rights[sitesection].description|regex_replace:"/\[.+\]/":" "} 					{if $smarty.section.sitesection.last} )</li></ul></div>{/if}				{/section}				{assign var="site_section" value="_"}				{section name=sitesection loop=$page.roles[roles].rights}                					{if $smarty.section.sitesection.first}<div class="right_list" onclick="showWindow.open('right_full_{$smarty.section.roles.iteration}')">{/if}					{assign var="new_site_section" value=$page.roles[roles].rights[sitesection].description|regex_replace:"/\[(.+)\].*/":"\\1"}					{if ($site_section != $new_site_section)}						{$new_site_section}{if !$smarty.section.sitesection.last}, {else}</div>{/if}						{assign var="site_section" value=$new_site_section}					{/if}				{sectionelse}      				<span class="empty">Отсутствуют</span>				{/section}				{/strip}				</td>			<td class="oper">				<a href="{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=edit&id={$page.roles[roles].id}" title="Редактировать"><div class="edit"></div></a>				{if $page.roles[roles].id > 0}					{strip}<a href="{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=del&id={$page.roles[roles].id}"										title="Удалить"										onclick="return confirm('Удалить роль &quot;{$page.roles[roles].name}&quot; (id: {$page.roles[roles].id}) ?')"><div class="del"></div></a>{/strip}				{/if}			</td>		</tr>{/section}	</tbody></table><input class="button" id="add" type="button" value="Добавить" onclick="javascript:button.disable(this); javascript:self.location.href='{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=add'" /><script language="javascript">	//marks.init(new Array(new Array('mark1','Управление субъектами',150)), "tabline", "texts", {if $page.mark != ''}{$page.mark}{else}0{/if}, "top.gif", "sel", "top_grey.gif", "no_sel");	$(document).ready(function() {	// ---- tablesorter -----		$("#roles").tablesorter({			sortList:[[0,0]],			widgets: ['zebra']		});	// ---- tablesorter -----	});</script>