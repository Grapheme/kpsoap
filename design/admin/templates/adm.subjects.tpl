<script type="text/javascript" src="{$SERVER_URL_NAME}{#ui_tablesorter#}"></script><div id="tabline"></div><div id="texts[0]" style="display: none">	<table id="subject_list" class="tablesorter">  	<thead>    	<tr>        <th class="id"><div>ID</div></th>        <th class="sort"><div>Сорт</div></th>        <th><div>ФИО</div></th>        <th class="info"><div>Информация</div></th>        <th class="desc"><div>Группы/Роли</div></th>        <th class="prep"><div>Лич.&nbsp;стр</div></th>        <th class="oper" onclick="void(0)">&nbsp;</th>			</tr>    </thead>    <tbody>	{section name=subject_list loop=$page.subject_list}      <tr>        {strip}<td>        	{if $page.subject_list[subject_list].id < 0}          	{$page.subject_list[subject_list].id|regex_replace:"/[\-]+/":"&bull;&nbsp;"}          {else}          	{$page.subject_list[subject_list].id}          {/if}        </td>{/strip}        <td>{$page.subject_list[subject_list].priority}</td>        {strip}<td>				{if $page.subject_list[subject_list].photoname != ""}					<div id="photo_preview_{$smarty.section.subject_list.iteration}" class="photo_preview">						<img src="http://{$smarty.server.SERVER_NAME}/img-dbimage/{$page.subject_list[subject_list].photoname|regex_replace:"/([0-9]+)\.(jpg|png|gif)/i":"\\1-\\2"}-200xauto-85.{$page.subject_list[subject_list].photoname|regex_replace:"/[0-9]+\.(jpg|png|gif)/i":"\\1"}" width="200px" title="Закрыть" onclick="showWindow.close('photo_preview_{$smarty.section.subject_list.iteration}');" />					</div>				{/if}				<span class="subject_{if $page.subject_list[subject_list].photoname == ""}no_{/if}img"{if $page.subject_list[subject_list].photoname != ""} onclick="showWindow.open('photo_preview_{$smarty.section.subject_list.iteration}')" {/if}>        {section name=s_name loop=$page.subject_list[subject_list].name}        	{$page.subject_list[subject_list].name[s_name]}					{if !$smarty.section.s_name.last} {/if}        {/section}</span>       	</td>{/strip}        <td>        													<div id="right_full_{$smarty.section.subject_list.iteration}" class="window_fulltext width2">							<div class="close" onclick="showWindow.close('right_full_{$smarty.section.subject_list.iteration}');"></div>							<div class="text_group">								<b>ФИО:</b> {strip}								{section name=s_name loop=$page.subject_list[subject_list].name}									{$page.subject_list[subject_list].name[s_name]}									{if !$smarty.section.s_name.last} {/if}								{/section}							</div>							<div class="text_group">							{/strip}								<b>Логин:</b> {$page.subject_list[subject_list].login}<br />								<b>Пароль:</b> {$page.subject_list[subject_list].password}							</div>							<div class="text_group">								<b>Алиас:</b> {$page.subject_list[subject_list].alias}<br />								<b>Статус:</b> {if $page.subject_list[subject_list].personal_page || $page.subject_list[subject_list].is_teacher}{if $page.subject_list[subject_list].is_teacher}Преподаватель{else}Имеет личную страничку{/if}{else}Субъект{/if}							</div>							{if $page.subject_list[subject_list].description|count_characters > 30}							<div class="text_group">								<b>Дополнительная информация:</b><br />								<div class="dof_info">								{$page.subject_list[subject_list].description}								</div>							</div>							{/if}						</div>												          	<span class="descript d_point" onclick="showWindow.open('right_full_{$smarty.section.subject_list.iteration}')"><span class="full_info">Просмотреть</span></span>        	       	</td>        <td width="150px">									{strip}<span class="descript">• Роли (					{section name=subjects_role loop=$page.subject_list[subject_list].subjects_role.cell}						{$page.subject_list[subject_list].subjects_role.cell[subjects_role].name}						{if !$smarty.section.subjects_role.last}, {else}){/if}					{/section}					</span>{/strip}					{if $page.subject_list[subject_list].subjects_group.num_rows > 0}						{strip}<br /><span class="descript">• Группы (						{section name=subjects_group loop=$page.subject_list[subject_list].subjects_group.cell}							{$page.subject_list[subject_list].subjects_group.cell[subjects_group].name}							{if !$smarty.section.subjects_group.last}, {else}){/if}						{/section}						</span>{/strip}					{/if}									</td>        <td>{if $page.subject_list[subject_list].personal_page || $page.subject_list[subject_list].is_teacher}{if $page.subject_list[subject_list].is_teacher}<span title="Субъект отмечен как Преподаватель">Да (ПРЕП)</span>{else}Да{/if}{else}Нет{/if}</td>        <td class="oper">        	<a href="{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=edit&id={$page.subject_list[subject_list].id}" title="Редактировать"><div class="edit"></div></a>        	{if $page.subject_list[subject_list].id > 0}        		{strip}<a href="{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=del&id={$page.subject_list[subject_list].id}"            	 				title="Удалить"               				onclick="return confirm('Удалить субъект &quot;											{section name=s_name loop=$page.subject_list[subject_list].name}												{$page.subject_list[subject_list].name[s_name]}{if $smarty.section.s_name.index < ($smarty.section.s_name.total-1)}&nbsp;{/if}											{/section}                      &quot; (id: {$page.subject_list[subject_list].id}) ?')"><div class="del"></div></a>{/strip}        	{/if}        </td>      </tr>  {/section}  	</tbody>  </table>  <input class="button" id="add" type="button" value="Добавить" onclick="javascript:button.disable(this); javascript:self.location.href='{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=add'" /></div><div id="texts[1]" style="display: none">	<table id="group_list" class="tablesorter">  	<thead>    	<tr>        <th class="id"><div>ID</div></th>        <th class="alias"><div>Алиас</div></th>        <th class="sort"><div>Сорт</div></th>        <th><div>Имя&nbsp;группы</div></th>        <th class="desc"><div>Описание</div></th>        <th class="desc"><div>Роли&nbsp;группы</div></th>        <th class="oper" onclick="void(0)">&nbsp;</th>			</tr>    </thead>    <tbody>	{section name=group_list loop=$page.group_list}      <tr>        {strip}<td>        	{if $page.group_list[group_list].id < 0}          	{$page.group_list[group_list].id|regex_replace:"/[\-]+/":"&bull;&nbsp;"}          {else}          	{$page.group_list[group_list].id}          {/if}        </td>{/strip}        <td>{$page.group_list[group_list].alias}</td>        <td>{$page.group_list[group_list].priority}</td>        <td>        {section name=s_name loop=$page.group_list[group_list].name}        	{$page.group_list[group_list].name[s_name]}        {/section}       	</td>        <td width="150px">        	{if $page.group_list[group_list].description == ''}        		<span class="empty">Отсутствует</span>          {else}          	{if $page.group_list[group_list].description|count_characters > 30}						<div id="grdesc_full_{$smarty.section.group_list.iteration}" class="window_fulltext width2 marleft50">							<div class="close" onclick="showWindow.close('grdesc_full_{$smarty.section.group_list.iteration}');"></div>							{$page.group_list[group_list].description}						</div>												{/if}          	<span class="descript{if $page.group_list[group_list].description|count_characters > 30} d_point{/if}"{if $page.group_list[group_list].description|count_characters > 30} onclick="showWindow.open('grdesc_full_{$smarty.section.group_list.iteration}')"{/if}>{$page.group_list[group_list].description|strip_tags|truncate:30:"..."}</span>        	{/if}        </td>				<td width="150px">					<span class="descript">					{section name=subjects_role loop=$page.group_list[group_list].subjects_role.cell}						{strip}{$page.group_list[group_list].subjects_role.cell[subjects_role].name}						{if !$smarty.section.subjects_role.last}, {/if}{/strip}					{/section}					</div>				</td>        <td class="oper">        	<a href="{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=editgroup&id={$page.group_list[group_list].id}" title="Редактировать"><div class="edit"></div></a>       		{if $page.group_list[group_list].id > 0}          	{strip}<a href="{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=delgroup&id={$page.group_list[group_list].id}" 											title="Удалить группу"											onclick="return confirm('Удалить группу &quot;											{section name=s_name loop=$page.group_list[group_list].name}												{$page.group_list[group_list].name[s_name]}{if $smarty.section.s_name.index < ($smarty.section.s_name.total-1)}&nbsp;{/if}											{/section}                      &quot; (id: {$page.group_list[group_list].id}) ?')"><div class="del"></div></a>{/strip}        	{/if}        	</td>      </tr>  {/section}  	</tbody>  </table>  <input class="button" id="add" type="button" value="Добавить" onclick="javascript:button.disable(this); javascript:self.location.href='{$SERVER_URL_NAME}admin/{$SITE_SECTION_NAME}/:action=addgroup'" /></div><script language="javascript">	marks.init(new Array(new Array('mark1','Управление субъектами',150),											 new Array('mark2','Управление группами',130)), "tabline", "texts", {if $page.mark != ''}{$page.mark}{else}0{/if}, "top.gif", "sel", "top_grey.gif", "no_sel");{literal}	$(document).ready(function() {	// ---- tablesorter -----		$("#subject_list").tablesorter({			sortList:[[3,0]],			widgets: ['zebra']		});		$("#group_list").tablesorter({			sortList:[[2,0]],			widgets: ['zebra']		});	// ---- tablesorter -----	});{/literal}</script>